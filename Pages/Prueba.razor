@page "/prueba"
@using Services
@using NutrifoodsFrontend.Data.Dto
@inject IMealPlanService mpService

@if (mealPlan == null)
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true" />
}
else
{
    <MudText>@mealPlan.CarbohydratesTarget</MudText>
    @foreach (var mealMenu in mealPlan.MealMenus)
    {
        foreach (var recipe in mealMenu.MenuRecipes)
        {
            var receta = recipe.Recipe;
            <MudText>@receta.Name</MudText>
        }
    }
}

@code {
    private HttpResponseMessage? mealPlanResponse;
    private MealPlanDto? mealPlan;

    protected override async Task OnInitializedAsync()
    {
        mealPlanResponse = await mpService.GenerateBasedOnMbr(1900, "y", "normal", "normal");
        mealPlan = mealPlanResponse.Content.ReadFromJsonAsync<MealPlanDto>().Result;

    }
}
